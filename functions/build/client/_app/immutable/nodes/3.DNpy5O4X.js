import{r as E,s as M,d as T,t as k,u as L}from"../chunks/disclose-version.D7UMpawt.js";import{e as v,u as D,z as F,C,B as S}from"../chunks/runtime.C2i9DcWR.js";import{s as z}from"../chunks/render.BQc3hvKV.js";import{i as N}from"../chunks/lifecycle.CIB9LcBL.js";import{p as O}from"../chunks/props.CTSSmEyv.js";import{p as P,i as R,a as U}from"../chunks/entry.0-3npzez.js";function j(a,r,n){v(()=>{var o=D(()=>r(a,n==null?void 0:n())||{});if(o!=null&&o.destroy)return()=>o.destroy()})}function B(a){const r=JSON.parse(a);return r.data&&(r.data=P(r.data)),r}function p(a){return HTMLElement.prototype.cloneNode.call(a)}function J(a,r=()=>{}){const n=async({action:t,result:s,reset:i=!0,invalidateAll:c=!0})=>{s.type==="success"&&(i&&HTMLFormElement.prototype.reset.call(a),c&&await R()),(location.origin+location.pathname===t.origin+t.pathname||s.type==="redirect"||s.type==="error")&&U(s)};async function o(t){var b,y,h,w,A;if(((b=t.submitter)!=null&&b.hasAttribute("formmethod")?t.submitter.formMethod:p(a).method)!=="post")return;t.preventDefault();const i=new URL((y=t.submitter)!=null&&y.hasAttribute("formaction")?t.submitter.formAction:p(a).action),c=(h=t.submitter)!=null&&h.hasAttribute("formenctype")?t.submitter.formEnctype:p(a).enctype,m=new FormData(a),u=(w=t.submitter)==null?void 0:w.getAttribute("name");u&&m.append(u,((A=t.submitter)==null?void 0:A.getAttribute("value"))??"");const f=new AbortController;let d=!1;const g=await r({action:i,cancel:()=>d=!0,controller:f,formData:m,formElement:a,submitter:t.submitter})??n;if(d)return;let l;try{const e=new Headers({accept:"application/json","x-sveltekit-action":"true"});c!=="multipart/form-data"&&e.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(c)?c:"application/x-www-form-urlencoded");const H=c==="multipart/form-data"?m:new URLSearchParams(m),x=await fetch(i,{method:"POST",headers:e,cache:"no-store",body:H,signal:f.signal});l=B(await x.text()),l.type==="error"&&(l.status=x.status)}catch(e){if((e==null?void 0:e.name)==="AbortError")return;l={type:"error",error:e}}g({action:i,formData:m,formElement:a,update:e=>n({action:i,result:l,reset:e==null?void 0:e.reset,invalidateAll:e==null?void 0:e.invalidateAll}),result:l})}return HTMLFormElement.prototype.addEventListener.call(a,"submit",o),{destroy(){HTMLFormElement.prototype.removeEventListener.call(a,"submit",o)}}}var Y=k('<div class="flex flex-col gap-2 py-2 px-3"><form method="post" action="?/sayHello"><input placeholder="Your name" name="name" class="border rounded"></form> </div>');function X(a,r){F(r,!1);let n=O(r,"form");N();var o=Y(),t=E(o);E(t),L(t);var s=M(t,!0);L(o),C(()=>{var i;return z(s,` Message: ${((i=n())==null?void 0:i.message)??""??""}`)}),j(t,i=>J(i)),T(a,o),S()}export{X as component};
